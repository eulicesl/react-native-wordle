# Phase 2B: Signature Features & Polish

Elevate the Vibe Meter, redesign the statistics experience, improve sharing, and create a memorable onboarding.

## Prerequisites

Phase 1A, 1B, and 2A must be completed. Win tiers, loss redesign, and streak milestones are in place.

## Context

- Vibe Meter: `src/components/VibeMeter.tsx` (horizontal bar, Reanimated spring)
- Vibe calculation: `src/utils/vibeMeter.ts` (score calculation logic)
- Share: `src/utils/shareResults.ts` (emoji grid text)
- Share card: `src/components/ShareCard.tsx` (image card for sharing)
- Share image: `src/utils/shareImage.ts` (capture and share)
- Statistics: `src/screens/statistics/index.tsx` (stats, achievements, history tabs)
- Onboarding: `src/components/Onboarding.tsx` (7-step tutorial)
- Game board: `src/screens/game/components/gameBoard.tsx`
- Word definitions: `src/utils/wordDefinitions.ts`

## Tasks

- [ ] F2.6: Redesign the Vibe Meter from a horizontal bar to a circular arc gauge. In src/components/VibeMeter.tsx, replace the horizontal bar with a semi-circular arc (SVG-based). Install react-native-svg if not already installed (check package.json first). Create the arc using SVG Path with a semi-circle from 180° to 0° (left to right). The arc should have: 1) An 8px wide track in theme.colors.background2, 2) A fill arc that animates to the current score percentage using Reanimated's useAnimatedProps on the SVG strokeDashoffset. 3) Color that shifts based on score: 0-20% = #40C4FF (blue), 20-40% = #00BFA5 (teal), 40-60% = #FFD600 (yellow), 60-80% = #FF9100 (orange), 80-100% = gradient from #7C4DFF to #FF6B9D (use the 80%+ color as #7C4DFF). 4) Score number displayed in the center of the arc in Montserrat 800, 24px. 5) Trend arrow (↑/↓) below the score in 12px. 6) "VIBE" label below the arc in Montserrat 700, 10px, letter-spaced 2px. The arc diameter should be responsive: 100px on phone, 140px on tablet (use responsive() from responsive.ts). Maintain the existing accessibilityRole="progressbar" and accessibilityValue. Animate the fill with withSpring (damping 15, stiffness 90). When reduceMotion is enabled, set the value instantly.

- [ ] F2.7: Add real-time Vibe Meter feedback during tile reveal. In src/screens/game/components/gameBoard.tsx, the VibeMeter currently receives the full vibeScore calculated from all guesses at once (line 177). Change this so the vibe score updates incrementally as each tile in a row is revealed. Approach: create a state variable `revealProgress` (0-5) that tracks how many tiles in the current row have been revealed. Use a useEffect with a series of timeouts matching the tile flip stagger timing to increment revealProgress from 0→5. At each increment, recalculate the vibe score using only the tiles revealed so far (pass a modified guesses array where the current row's matches are partially filled). This makes the Vibe Meter needle move in sync with each tile flip: jumping up on correct, bumping on present, dipping on absent. After all 5 tiles are revealed, set the final score. The VibeMeter component itself doesn't need to change - it already animates to whatever score it receives. Play a subtle haptic (impactLight) when the meter crosses threshold boundaries (20%, 40%, 60%, 80%).

- [ ] F2.9: Enhance the ShareCard component for visually rich sharing. In src/components/ShareCard.tsx, update the share card design to be more visually appealing and branded. The card should include: 1) WordVibe logo text at the top in Montserrat 800, 2) Daily puzzle number or "Unlimited" label, 3) The colored tile grid showing the game result (use actual tile colors, not emojis), 4) Guess count displayed as "4/6" in large text, 5) Vibe score percentage with the arc meter icon, 6) Streak badge if applicable (show flame emoji + streak count), 7) Hard mode indicator if active, 8) Dark/light variant matching the user's current theme. The card should be sized for social media sharing: 1080x1350px (Instagram) or 1200x630px (Twitter/Open Graph). Use react-native-view-shot (already installed) to capture the card. Update the captureAndShare function in src/utils/shareImage.ts to use the new card design. Ensure the hidden ViewShot container in gameBoard.tsx (line 331) uses the new card props.

- [ ] F2.10a: Redesign statistics screen header with animated summary cards. In src/screens/statistics/index.tsx, redesign the stats grid section (renderStats, lines 187-225). Replace the current StatBox layout with 4 individual cards in a 2x2 grid: Games Played, Win %, Current Streak, Max Streak. Each card should: 1) Have a background of theme.colors.background2 with 12px border radius, 2) Display the number in Montserrat 800, 28px with a count-up animation (use Reanimated: interpolate a shared value from 0 to the target number over 800ms with easing, display as Math.round), 3) Display the label below in Montserrat 600, 11px, uppercase, letter-spaced 1px. 4) The cards should animate in with a staggered fade-in when the stats tab is active (use FadeInDown with delay based on index). Remove the averageGuesses stat from the visible grid (it's less important). Add it as a small text below the grid instead. Update the statsGrid and statsRow styles to use a 2-column grid with gap spacing.

- [ ] F2.10b: Improve distribution bar animations and add calendar heatmap. In src/screens/statistics/index.tsx, the distribution bars (DistributionBar component, already migrated to Reanimated in Phase 1A) should highlight the bar corresponding to the last win. Add a `lastWinGuess` prop derived from statistics: find which guess count won the most recently. That bar should use the primary color (colors.correct / #7C4DFF) while others use theme.colors.background3. Also add a simple calendar heatmap below the distribution chart: create a CalendarHeatmap component that renders the last 30 days as a grid of small squares (12x12px, 3px gap). Each square's color indicates play status: green (won), red (lost), gray (not played). Data source: load game history from src/utils/gameHistory.ts using loadGameHistory(). Group entries by date and map to the heatmap. Show day labels (M, T, W, etc.) on the left. This gives players a visual sense of their consistency.

- [ ] F2.11: Redesign onboarding as an interactive mini-tutorial. In src/components/Onboarding.tsx, replace the current 7-step static tutorial with a more engaging 4-step interactive experience. Step 1: Welcome screen showing "WORDVIBE" with animated logo (letters fade in staggered) and "Feel the word." tagline, with a "Let's Play" button. Step 2: "How it works" - show a pre-filled example row of tiles (e.g., W-E-A-R-Y with W correct, others empty). Animate the tiles flipping to reveal W as purple with the label "Purple = locked in. The letter is exactly right." Then reveal another example showing a pink tile with "Pink = close vibe. Right letter, wrong spot." Then slate with "Slate = no vibe. Not in the word." Step 3: "Your Vibe Meter" - show a mock Vibe Meter animating from 0 to 75% with text "Watch your vibe rise as you get closer!" Step 4: "Ready?" with mode selection (Daily Challenge and Unlimited buttons) that transitions directly into the game. Store onboarding completion in AsyncStorage (already done in current implementation, key 'onboardingComplete'). The tutorial state should NOT be saved to game statistics. Use Reanimated for all tutorial animations. Make each step skippable with a "Skip" button in the top-right corner.
